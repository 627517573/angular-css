/*! angular-css 1.0.6 | Copyright (c) 2015 DOOR3, Alex Castillo | MIT License */"use strict";!function(a){var b=a.module("door3.css",[]);b.config(["$logProvider",function(a){a.debugEnabled(!1)}]),b.provider("$css",[function(){var b=this.defaults={element:"link",rel:"stylesheet",type:"text/css",container:"head",method:"append",weight:0};this.$get=["$rootScope","$injector","$window","$timeout","$compile","$http","$filter","$log",function(d,e,f,g,h,i,j,k){function l(a,b,c){c&&b.hasOwnProperty("css")&&v.bind([p(b.css)],c)}function m(a,b,c){c&&v.remove(v.getFromRoute(c)),b&&v.add(v.getFromRoute(b))}function n(a,b,c,d){d&&v.remove(v.getFromState(d)),b&&v.add(v.getFromState(b))}function o(b){a.isDefined(A.breakpoints)&&(b.breakpoint in A.breakpoints&&(b.media=A.breakpoints[b.breakpoint]),delete b.breakpoints)}function p(b){return b?(a.isString(b)&&(b=a.extend({href:b},A)),a.isArray(b)&&a.isString(b[0])&&a.forEach(b,function(c){b=a.extend({href:c},A)}),a.isObject(b)&&!a.isArray(b)&&(b=a.extend(b,A)),a.isArray(b)&&a.isObject(b[0])&&a.forEach(b,function(c){b=a.extend(c,A)}),o(b),b):void 0}function q(a){if(!a)return k.error("No stylesheets provided");var b="?cache=";-1===a.href.indexOf(b)&&(a.href=a.href+(a.bustCache?b+(new Date).getTime():""))}function r(a,b){return a&&b?j("filter")(a,function(a){return a[b]}):k.error("filterBy: missing array or property")}function s(a){return a?(x[a.href]=f.matchMedia(a.media),y[a.href]=function(b){g(function(){if(b.matches)d.stylesheets.push(a);else{var c=d.stylesheets.indexOf(j("filter")(d.stylesheets,{href:a.href})[0]);-1!==c&&d.stylesheets.splice(c,1)}})},x[a.href].addListener(y[a.href]),void y[a.href](x[a.href])):k.error("No stylesheet provided")}function t(b){return b?void(d&&a.isDefined(x)&&x[b.href]&&a.isDefined(y)&&x[b.href].removeListener(y[b.href])):k.error("No stylesheet provided")}function u(a){return a?!(!a.media||-1!==z.indexOf(a.media)||!f.matchMedia):k.error("No stylesheet provided")}var v={},w='<link ng-repeat="stylesheet in stylesheets track by $index | orderBy: \'weight\' " rel="{{ stylesheet.rel }}" type="{{ stylesheet.type }}" ng-href="{{ stylesheet.href }}" ng-attr-media="{{ stylesheet.media }}">',x={},y={},z=["print"],A=a.extend({},b),B=a.element(document.querySelector?document.querySelector(A.container):document.getElementsByTagName(A.container)[0]);return a.forEach(c,function(a,b){a.hasOwnProperty("css")&&(c[b]=p(a.css))}),d.stylesheets=[],B[A.method](h(w)(d)),d.$on("$directiveAdd",l),d.$on("$routeChangeSuccess",m),d.$on("$stateChangeSuccess",n),v.getFromRoute=function(b){if(!b)return k.error("Get From Route: No route provided");var c=null,d=[];return b.$$route&&b.$$route.css?c=b.$$route.css:b.css&&(c=b.css),c&&(a.isArray(c)?a.forEach(c,function(a){d.push(p(a))}):d.push(p(c))),d},v.getFromRoutes=function(b){if(!b)return k.error("Get From Routes: No routes provided");var c=[];return a.forEach(b,function(a){var b=v.getFromRoute(a);b.length&&c.push(b[0])}),c},v.getFromState=function(b){if(!b)return k.error("Get From State: No state provided");var c=[];return a.isDefined(b.views)&&a.forEach(b.views,function(a){a.css&&c.push(p(a.css))}),a.isDefined(b.children)&&a.forEach(b.children,function(b){b.css&&c.push(p(b.css)),a.isDefined(b.children)&&a.forEach(b.children,function(a){a.css&&c.push(p(a.css))})}),a.isDefined(b.css)&&(a.isArray(b.css)?a.forEach(b.css,function(a){c.push(p(a))}):c.push(p(b.css))),c},v.getFromStates=function(b){if(!b)return k.error("Get From States: No states provided");var c=[];return a.forEach(b,function(b){var d=v.getFromState(b);a.isArray(d)?a.forEach(d,function(a){c.push(a)}):c.push(d)}),c},v.preload=function(b,d){b||(b=[],c.length&&Array.prototype.push.apply(b,c),e.has("$route")&&Array.prototype.push.apply(b,v.getFromRoutes(e.get("$route").routes)),e.has("$state")&&Array.prototype.push.apply(b,v.getFromStates(e.get("$state").get()))),b=r(b,"preload"),a.forEach(b,function(c,e){i.get(c.href).success(function(c){k.debug("preload response: "+c),b.length===e+1&&a.isFunction(d)&&d(b)}).error(function(){k.error("Incorrect path for "+c.href)})})},v.bind=function(b,c){if(!b||!c)return k.error("No scope or stylesheets provided");var d=[];a.isArray(b)?a.forEach(b,function(a){d.push(p(a))}):d.push(p(b)),v.add(d),k.debug("$css.bind(): Added",d),c.$on("$destroy",function(){v.remove(d),k.debug("$css.bind(): Removed",d)})},v.add=function(b){return b?(a.isArray(b)||(b=[b]),a.forEach(b,function(a){a=p(a),a.href&&!j("filter")(d.stylesheets,{href:a.href}).length&&(q(a),u(a)?s(a):d.stylesheets.push(a),k.debug("$css.add(): "+a.href))}),void d.$broadcast("$cssAdd",b,d.stylesheets)):k.error("No stylesheets provided")},v.remove=function(b){return b?(a.isArray(b)||(b=[b]),b=j("filter")(b,function(a){return!a.persist}),a.forEach(b,function(a){a=p(a);var b=d.stylesheets.indexOf(j("filter")(d.stylesheets,{href:a.href})[0]);-1!==b&&d.stylesheets.splice(b,1),t(a),k.debug("$css.remove(): "+a.href)}),void d.$broadcast("$cssRemove",b,d.stylesheets)):k.error("No stylesheets provided")},v.removeAll=function(){d&&d.hasOwnProperty("stylesheets")&&(d.stylesheets.length=0),k.debug("all stylesheets removed")},v.preload(),v}]}]),b.filter("$cssLinks",function(){return function(b){if(!b||!a.isArray(b))return b;var c="";return a.forEach(b,function(a){c+='<link rel="'+a.rel+'" type="'+a.type+'" href="'+a.href+'"',c+=a.media?' media="'+a.media+'"':"",c+=">\n\n"}),c}}),b.run(["$css",function(){}]);var c=[],d=a.module;a.module=function(){var b=d.apply(this,arguments),e=b.directive;return b.directive=function(b,d){var f=a.isFunction(d)?d:d[d.length-1];try{var g=a.copy(f)();g.directiveName=b,g.hasOwnProperty("css")&&c.push(g)}catch(h){}return e.apply(this,arguments)},b.config(["$provide","$injector",function(b,d){a.forEach(c,function(a){var c=a.directiveName+"Directive";d.has(c)&&b.decorator(c,["$delegate","$rootScope","$timeout",function(b,c,d){var e=b[0],f=e.compile;return e.css&&(a.css=e.css),e.compile=function(){var a=f?f.apply(this,arguments):!1;return function(b){var f=arguments;d(function(){a&&a.apply(this,f)}),c.$broadcast("$directiveAdd",e,b)}},b}])})}]),b}}(angular);